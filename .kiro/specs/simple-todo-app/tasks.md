# Implementation Plan

## Phase 1: UI Foundation

- [x] 1. プロジェクトセットアップと TypeScript 環境構築

  - Vite プロジェクトの初期化と TypeScript 設定
  - 必要な依存関係のインストール（TypeScript、Vite、テストライブラリ）
  - プロジェクト構造の作成（src/models, src/services, src/repositories, src/controllers）
  - _Requirements: 全要件の基盤_

- [x] 2. 基本 HTML マークアップの作成

  - index.html の完全な構造作成（セマンティック HTML）
  - タスク入力フィールドとボタンの実装
  - タスクリスト表示エリアの実装（サンプルデータ含む）
  - フィルターボタン（すべて/未完了/完了済み）の実装
  - 統計情報表示エリアの実装
  - アクセシビリティ対応（ARIA 属性、ラベル）
  - _Requirements: 1.1, 5.1, 6.1_

- [x] 3. 基本 CSS スタイリングの実装
  - レスポンシブレイアウトの基本 CSS 作成
  - タスクアイテムのスタイリング（チェックボックス、テキスト、削除ボタン）
  - 完了タスクの取り消し線スタイル実装
  - フィルターボタンのアクティブ状態スタイル
  - エラーメッセージ表示のスタイリング
  - モバイルファーストデザイン
  - _Requirements: 2.2, 2.3_

## Phase 2: シナリオ 1 - タスク追加機能 (1 テストケースずつ TDD)

- [x] 4. テストケース 1: 「新しいタスクを入力して追加ボタンを押すとタスクが追加される」

  - 4.1 E2E テスト作成（RED）
  - 4.2 Task インターフェースの最小実装（GREEN）
  - 4.3 リファクタリング（REFACTOR）
  - _Requirements: 1.1_

- [x] 5. テストケース 2: 「Enter キーでタスクが追加される」

  - 5.1 E2E テスト作成（RED）
  - 5.2 Enter キーイベントハンドリング実装（GREEN）
  - 5.3 リファクタリング（REFACTOR）
  - _Requirements: 1.1_

- [x] 6. テストケース 3: 「空文字では追加されない」

  - 6.1 E2E テスト作成（RED）
  - 6.2 バリデーション機能実装（GREEN）
  - 6.3 リファクタリング（REFACTOR）
  - _Requirements: 1.2_

- [x] 7. テストケース 4: 「追加されたタスクがリストに表示される」

  - 7.1 E2E テスト作成（RED）
  - 7.2 TaskRepository と LocalStorage 実装（GREEN）
  - 7.3 リファクタリング（REFACTOR）
  - _Requirements: 1.1_

- [ ] 8. テストケース 5: 「入力フィールドが追加後にクリアされる」
  - 8.1 E2E テスト作成（RED）
  - 8.2 入力フィールドクリア機能実装（GREEN）
  - 8.3 リファクタリング（REFACTOR）
  - _Requirements: 1.1_

## Phase 3: シナリオ 2 - タスク完了切り替え機能 (1 テストケースずつ TDD)

- [ ] 9. テストケース 6: 「チェックボックスをクリックするとタスクの完了状態が切り替わる」

  - 9.1 E2E テスト作成（RED）
  - 9.2 toggleTask 機能の最小実装（GREEN）
  - 9.3 リファクタリング（REFACTOR）
  - _Requirements: 2.1_

- [ ] 10. テストケース 7: 「完了タスクに取り消し線が表示される」

  - 10.1 E2E テスト作成（RED）
  - 10.2 CSS クラス切り替え実装（GREEN）
  - 10.3 リファクタリング（REFACTOR）
  - _Requirements: 2.2_

- [ ] 11. テストケース 8: 「完了状態の変更が LocalStorage に保存される」

  - 11.1 E2E テスト作成（RED）
  - 11.2 updateTask メソッド実装（GREEN）
  - 11.3 リファクタリング（REFACTOR）
  - _Requirements: 2.1_

- [ ] 12. テストケース 9: 「統計情報（完了数/総数）が更新される」
  - 12.1 E2E テスト作成（RED）
  - 12.2 統計情報計算・表示機能実装（GREEN）
  - 12.3 リファクタリング（REFACTOR）
  - _Requirements: 5.1_

## Phase 4: シナリオ 3 - タスク削除機能 (1 テストケースずつ TDD)

- [ ] 13. テストケース 10: 「削除ボタンをクリックするとタスクが削除される」

  - 13.1 E2E テスト作成（RED）
  - 13.2 deleteTask 機能の最小実装（GREEN）
  - 13.3 リファクタリング（REFACTOR）
  - _Requirements: 3.1_

- [ ] 14. テストケース 11: 「削除後に統計情報が更新される」

  - 14.1 E2E テスト作成（RED）
  - 14.2 削除後の統計更新実装（GREEN）
  - 14.3 リファクタリング（REFACTOR）
  - _Requirements: 3.1, 5.1_

- [ ] 15. テストケース 12: 「削除が LocalStorage に反映される」
  - 15.1 E2E テスト作成（RED）
  - 15.2 LocalStorage からの削除実装（GREEN）
  - 15.3 リファクタリング（REFACTOR）
  - _Requirements: 3.1_

## Phase 5: シナリオ 4 - フィルタリング機能 (1 テストケースずつ TDD)

- [ ] 16. テストケース 13: 「すべてフィルターですべてのタスクが表示される」

  - 16.1 E2E テスト作成（RED）
  - 16.2 フィルタリング機能の基本実装（GREEN）
  - 16.3 リファクタリング（REFACTOR）
  - _Requirements: 6.1_

- [ ] 17. テストケース 14: 「未完了フィルターで未完了タスクのみ表示される」

  - 17.1 E2E テスト作成（RED）
  - 17.2 未完了フィルター実装（GREEN）
  - 17.3 リファクタリング（REFACTOR）
  - _Requirements: 6.2_

- [ ] 18. テストケース 15: 「完了済みフィルターで完了タスクのみ表示される」

  - 18.1 E2E テスト作成（RED）
  - 18.2 完了済みフィルター実装（GREEN）
  - 18.3 リファクタリング（REFACTOR）
  - _Requirements: 6.3_

- [ ] 19. テストケース 16: 「フィルターボタンのアクティブ状態が切り替わる」
  - 19.1 E2E テスト作成（RED）
  - 19.2 アクティブ状態の UI 実装（GREEN）
  - 19.3 リファクタリング（REFACTOR）
  - _Requirements: 6.1, 6.2, 6.3_

## Phase 6: シナリオ 5 - タスク編集機能 (1 テストケースずつ TDD)

- [ ] 20. テストケース 17: 「ダブルクリックで編集モードになる」

  - 20.1 E2E テスト作成（RED）
  - 20.2 編集モード切り替え実装（GREEN）
  - 20.3 リファクタリング（REFACTOR）
  - _Requirements: 4.1_

- [ ] 21. テストケース 18: 「Enter キーで編集内容が保存される」

  - 21.1 E2E テスト作成（RED）
  - 21.2 Enter キーでの保存実装（GREEN）
  - 21.3 リファクタリング（REFACTOR）
  - _Requirements: 4.2_

- [ ] 22. テストケース 19: 「Escape キーで編集がキャンセルされる」

  - 22.1 E2E テスト作成（RED）
  - 22.2 Escape キーでのキャンセル実装（GREEN）
  - 22.3 リファクタリング（REFACTOR）
  - _Requirements: 4.3_

- [ ] 23. テストケース 20: 「空文字で保存すると変更が破棄される」

  - 23.1 E2E テスト作成（RED）
  - 23.2 空文字バリデーション実装（GREEN）
  - 23.3 リファクタリング（REFACTOR）
  - _Requirements: 4.4_

- [ ] 24. テストケース 21: 「編集内容が LocalStorage に保存される」
  - 24.1 E2E テスト作成（RED）
  - 24.2 編集内容の永続化実装（GREEN）
  - 24.3 リファクタリング（REFACTOR）
  - _Requirements: 4.1, 4.2_

## Phase 7: データ永続化の検証 (1 テストケースずつ TDD)

- [ ] 25. テストケース 22: 「ページリロード後もタスクが保持される」

  - 25.1 E2E テスト作成（RED）
  - 25.2 初期化時のデータ読み込み実装（GREEN）
  - 25.3 リファクタリング（REFACTOR）
  - _Requirements: 全要件_

- [ ] 26. テストケース 23: 「LocalStorage エラー時にエラーメッセージが表示される」
  - 26.1 E2E テスト作成（RED）
  - 26.2 エラーハンドリング実装（GREEN）
  - 26.3 リファクタリング（REFACTOR）
  - _Requirements: 全要件_

## Phase 8: 最終統合とポリッシュ

- [ ] 27. アプリケーション初期化とエントリーポイント

  - main.ts ファイルの作成
  - 依存関係の組み立て（DI コンテナ的な初期化）
  - アプリケーションの起動処理
  - _Requirements: 全要件_

- [ ] 28. 最終品質向上
  - アクセシビリティの最終確認
  - パフォーマンス最適化
  - ユーザビリティの向上
  - _Requirements: 全要件の品質保証_
